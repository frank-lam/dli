# 数据赋权<a name="dli_02_0039"></a>

## 功能介绍<a name="se8490992842549b6a3c256bc5e018bc7"></a>

该API用于将数据库或数据表的数据权限赋给指定的其他用户。

>![](public_sys-resources/icon-note.gif) **说明：**   
>被赋权用户所在用户组的所属区域需具有Tenant Guest权限。关于Tenant Guest权限的介绍和开通方法，详细参见[权限说明](http://support.huaweicloud.com/usermanual-permissions/zh-cn_topic_0063498930.html)和《统一身份认证服务用户指南》中的[如何创建用户组并授权](http://support.huaweicloud.com/usermanual-iam/zh-cn_topic_0046611269.html)。  

## URI<a name="sed20525659cf4b48837c283af3e523bd"></a>

-   URI格式：

    PUT /v1.0/\{project\_id\}/user-authorization

-   参数说明

    **表 1**  URI参数

    <a name="zh-cn_topic_0069077803_table60779388"></a>
    <table><thead align="left"><tr id="zh-cn_topic_0069077803_row61411666"><th class="cellrowborder" valign="top" width="10.891089108910892%" id="mcps1.2.4.1.1"><p id="a420a62a594f9410eaea229ffc8037a61"><a name="a420a62a594f9410eaea229ffc8037a61"></a><a name="a420a62a594f9410eaea229ffc8037a61"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="9.900990099009901%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0069077803_p873025824211"><a name="zh-cn_topic_0069077803_p873025824211"></a><a name="zh-cn_topic_0069077803_p873025824211"></a>是否必选</p>
    </th>
    <th class="cellrowborder" valign="top" width="79.20792079207921%" id="mcps1.2.4.1.3"><p id="a692d3cd97b464aed90ba6d841900a4a5"><a name="a692d3cd97b464aed90ba6d841900a4a5"></a><a name="a692d3cd97b464aed90ba6d841900a4a5"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="zh-cn_topic_0069077803_row48589216"><td class="cellrowborder" valign="top" width="10.891089108910892%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0069077803_p43412436"><a name="zh-cn_topic_0069077803_p43412436"></a><a name="zh-cn_topic_0069077803_p43412436"></a>project_id</p>
    </td>
    <td class="cellrowborder" valign="top" width="9.900990099009901%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0069077803_p26746391"><a name="zh-cn_topic_0069077803_p26746391"></a><a name="zh-cn_topic_0069077803_p26746391"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="79.20792079207921%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0069077803_p18974100"><a name="zh-cn_topic_0069077803_p18974100"></a><a name="zh-cn_topic_0069077803_p18974100"></a>来自公有云的Project ID，用于资源隔离。获取方式请参考<a href="获取项目编号.md">获取项目编号</a>。</p>
    </td>
    </tr>
    </tbody>
    </table>


## 请求消息<a name="s23efeb265f5547b185ae9824f2c33bf4"></a>

**表 2**  请求参数

<a name="zh-cn_topic_0069077916_table53369778"></a>
<table><thead align="left"><tr id="zh-cn_topic_0069077916_row2607862"><th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.1"><p id="zh-cn_topic_0069077916_p14149210296"><a name="zh-cn_topic_0069077916_p14149210296"></a><a name="zh-cn_topic_0069077916_p14149210296"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="9%" id="mcps1.2.5.1.2"><p id="ad6ac0587ffb9451a8c08638dc5eeff31"><a name="ad6ac0587ffb9451a8c08638dc5eeff31"></a><a name="ad6ac0587ffb9451a8c08638dc5eeff31"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="9%" id="mcps1.2.5.1.3"><p id="zh-cn_topic_0069077916_p181498118295"><a name="zh-cn_topic_0069077916_p181498118295"></a><a name="zh-cn_topic_0069077916_p181498118295"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="72%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0069077916_p61491811298"><a name="zh-cn_topic_0069077916_p61491811298"></a><a name="zh-cn_topic_0069077916_p61491811298"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0069077916_row50061100"><td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0069077916_p28417282"><a name="zh-cn_topic_0069077916_p28417282"></a><a name="zh-cn_topic_0069077916_p28417282"></a>user_name</p>
</td>
<td class="cellrowborder" valign="top" width="9%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0069077916_p20098542"><a name="zh-cn_topic_0069077916_p20098542"></a><a name="zh-cn_topic_0069077916_p20098542"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="9%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0069077916_p17369173"><a name="zh-cn_topic_0069077916_p17369173"></a><a name="zh-cn_topic_0069077916_p17369173"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0069077916_p64725793"><a name="zh-cn_topic_0069077916_p64725793"></a><a name="zh-cn_topic_0069077916_p64725793"></a>被赋权的用户名称，该用户将有权访问指定的数据库或数据表，被收回或者更新访问权限。</p>
</td>
</tr>
<tr id="zh-cn_topic_0069077916_row45661233"><td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0069077916_p7572367"><a name="zh-cn_topic_0069077916_p7572367"></a><a name="zh-cn_topic_0069077916_p7572367"></a>action</p>
</td>
<td class="cellrowborder" valign="top" width="9%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0069077916_p9381957"><a name="zh-cn_topic_0069077916_p9381957"></a><a name="zh-cn_topic_0069077916_p9381957"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="9%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0069077916_p21741052"><a name="zh-cn_topic_0069077916_p21741052"></a><a name="zh-cn_topic_0069077916_p21741052"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0069077916_p16194779"><a name="zh-cn_topic_0069077916_p16194779"></a><a name="zh-cn_topic_0069077916_p16194779"></a>指定赋权或回收。值为：grant，revoke或update。</p>
<p id="zh-cn_topic_0069077913_p26849649"><a name="zh-cn_topic_0069077913_p26849649"></a><a name="zh-cn_topic_0069077913_p26849649"></a>当用户同时拥有grant和revoke权限的时候才有权限使用update操作。</p>
</td>
</tr>
<tr id="zh-cn_topic_0069077916_row11535290"><td class="cellrowborder" colspan="4" valign="top" headers="mcps1.2.5.1.1 mcps1.2.5.1.2 mcps1.2.5.1.3 mcps1.2.5.1.4 "><p id="zh-cn_topic_0069077916_p61943273"><a name="zh-cn_topic_0069077916_p61943273"></a><a name="zh-cn_topic_0069077916_p61943273"></a><strong id="zh-cn_topic_0069077916_b20618548"><a name="zh-cn_topic_0069077916_b20618548"></a><a name="zh-cn_topic_0069077916_b20618548"></a>privileges</strong></p>
</td>
</tr>
<tr id="zh-cn_topic_0069077916_row51349205"><td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0069077916_p65644901"><a name="zh-cn_topic_0069077916_p65644901"></a><a name="zh-cn_topic_0069077916_p65644901"></a>object</p>
</td>
<td class="cellrowborder" valign="top" width="9%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0069077916_p15636737"><a name="zh-cn_topic_0069077916_p15636737"></a><a name="zh-cn_topic_0069077916_p15636737"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="9%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0069077916_p58616210"><a name="zh-cn_topic_0069077916_p58616210"></a><a name="zh-cn_topic_0069077916_p58616210"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.5.1.4 "><p id="p145161816114417"><a name="p145161816114417"></a><a name="p145161816114417"></a>被赋权的数据对象，命名方式为：</p>
<p id="zh-cn_topic_0069077916_p50292608"><a name="zh-cn_topic_0069077916_p50292608"></a><a name="zh-cn_topic_0069077916_p50292608"></a>(1) “databases.数据库名”，则数据库下面的所有数据都将被共享。</p>
<p id="zh-cn_topic_0069077916_p49980293"><a name="zh-cn_topic_0069077916_p49980293"></a><a name="zh-cn_topic_0069077916_p49980293"></a>(2) “databases.数据库名.tables.表名”, 指定的表的数据将被共享。</p>
<p id="zh-cn_topic_0069077916_p47169458"><a name="zh-cn_topic_0069077916_p47169458"></a><a name="zh-cn_topic_0069077916_p47169458"></a>(3) “databases.数据库名.tables.表名.columns.列名”，指定的列将被共享。</p>
</td>
</tr>
<tr id="zh-cn_topic_0069077916_row21871945"><td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0069077916_p26797084"><a name="zh-cn_topic_0069077916_p26797084"></a><a name="zh-cn_topic_0069077916_p26797084"></a>privileges</p>
</td>
<td class="cellrowborder" valign="top" width="9%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0069077916_p23080233"><a name="zh-cn_topic_0069077916_p23080233"></a><a name="zh-cn_topic_0069077916_p23080233"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="9%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0069077916_p57559574"><a name="zh-cn_topic_0069077916_p57559574"></a><a name="zh-cn_topic_0069077916_p57559574"></a>Array</p>
</td>
<td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.5.1.4 "><p id="p4266673615357"><a name="p4266673615357"></a><a name="p4266673615357"></a>待赋权，回收或更新的权限列表。若action为update，更新列表为空，则表示回收用户在该队列的所有权限。</p>
</td>
</tr>
</tbody>
</table>

## 响应消息<a name="s2abe68e5f6df419f83a67c17b36a4bcc"></a>

**表 3**  响应参数

<a name="zh-cn_topic_0069077916_table4786990"></a>
<table><thead align="left"><tr id="zh-cn_topic_0069077916_row52019407"><th class="cellrowborder" valign="top" width="12%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0069077916_p85149332910"><a name="zh-cn_topic_0069077916_p85149332910"></a><a name="zh-cn_topic_0069077916_p85149332910"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0069077916_p105143342916"><a name="zh-cn_topic_0069077916_p105143342916"></a><a name="zh-cn_topic_0069077916_p105143342916"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="78%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0069077916_p17514733296"><a name="zh-cn_topic_0069077916_p17514733296"></a><a name="zh-cn_topic_0069077916_p17514733296"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0069077916_row15291011"><td class="cellrowborder" valign="top" width="12%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0069077916_p30612383"><a name="zh-cn_topic_0069077916_p30612383"></a><a name="zh-cn_topic_0069077916_p30612383"></a>is_success</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0069077916_p58126760"><a name="zh-cn_topic_0069077916_p58126760"></a><a name="zh-cn_topic_0069077916_p58126760"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="78%" headers="mcps1.2.4.1.3 "><p id="p2699162916159"><a name="p2699162916159"></a><a name="p2699162916159"></a>执行请求是否成功。<span class="parmvalue" id="parmvalue8198034161044"><a name="parmvalue8198034161044"></a><a name="parmvalue8198034161044"></a>“true”</span>表示请求执行成功。</p>
</td>
</tr>
<tr id="zh-cn_topic_0069077916_row28715415"><td class="cellrowborder" valign="top" width="12%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0069077916_p44247284"><a name="zh-cn_topic_0069077916_p44247284"></a><a name="zh-cn_topic_0069077916_p44247284"></a>message</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0069077916_p60598252"><a name="zh-cn_topic_0069077916_p60598252"></a><a name="zh-cn_topic_0069077916_p60598252"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="78%" headers="mcps1.2.4.1.3 "><p id="p069962915150"><a name="p069962915150"></a><a name="p069962915150"></a>系统提示信息，执行成功时，信息可能为空。</p>
</td>
</tr>
</tbody>
</table>

## 示例<a name="section462957915344"></a>

-   请求样例：

    ```
    {
    "user_name": "user2",
    "action": "grant",
    "privileges": [
    {
    "object": "databases.db1.tables.tb2.columns.column1",
    "privileges": ["SELECT"]
    },
    {
       "object": "databases.db1.tables.tbl",
       "privileges": ["DROP_TABLE"]
    },
    {
       "object": "databases.db1",
       "privileges": ["SELECT"]
    }
    ]
    }
    ```

-   成功响应样例：

    ```
    {
      "is_success": true,
      "message": "" 
    }
    ```

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >调用API出错后，将不会返回上述结果，而是返回错误码和错误信息，详细介绍请参见[错误码](错误码.md)。  


